name: Baskets

on:
  push:
    branches: [ "main", "github" ]
    # paths:
    #   - baskets/**
    #   - internal/**
    #   - stores/storespb/**

# env:
#   SERVICE: baskets

jobs:
  test_call:
    strategy:
      matrix:
        services: [baskets, ordering]
    uses: ./.github/workflows/test.yaml
    with:
      service: ${{ matrix.services }}
    secrets: inherit
  
  build_call:
    strategy:
      matrix:
        services: [baskets, ordering]
    uses: ./.github/workflows/build.yaml
    needs: test_call
    with:
      service: ${{ matrix.services }}
    secrets: inherit
